<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>D3-Practice</title>
    <script src="https://code.jquery.com/jquery-3.1.1.js"
            integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="col-xs-12" style="text-align: center">
            <h1>台大資訊系統訓練班D3.js</h1>
            <hr>
        </div>
    </div>
</div>

<div class="container">
    <div class="row" style="padding-top: 40px;">
        <div class="col-xs-12">
            <h2>亂數產生年份：</h2>
        </div>

        <div class="col-xs-6 col-xs-offset-2" style="text-align: center">
            <p style="font-size: 40px;line-height:80px;border: 1px solid #666666;min-height: 40px;">
                0000
            </p>
        </div>

        <div class="col-xs-3" style="text-align: center">
            <button type="button" class="btn btn-default" onclick="lunch()">
                <span style="color: black">產生</span>
            </button>
        </div>
    </div>
</div>



<div class="container">
    <div class="row" style="padding-top: 40px;">
        <div class="col-xs-12"><hr></div>
        <div class="col-xs-12">
            <h2>SVG畫音符：</h2>
        </div>
        <div class="col-xs-4 col-md-4" style="border: 1px solid white;border-radius: 10px;">
            <svg width="100%" height="200">
                <rect x="160" y="45" width="5" height="78" fill="white"></rect>
                <circle cx="150" cy="120" r="15" fill="white"></circle>
            </svg>
        </div>

        <div class="col-xs-offset-1 col-xs-4 col-md-4" style="border: 1px solid white;border-radius: 10px;">
            <svg class="d3svg" id="music" width="100%" height="200"></svg>
        </div>
        <div class="col-xs-2">
            <button type="button" class="btn btn-default" onclick="d3svg()" style="width: 100%;">
                <span style="color: black">DRAW</span>
            </button>
            <h5>每次按隨機產生顏色</h5>
            <button type="button" class="btn btn-danger" onclick="musicReset()" style="width: 100%;margin-top: 20px;">
                <span style="color: black">CLEAR</span>
            </button>
        </div>
    </div>
</div>


<div class="container">
    <div class="row" style="padding-top: 40px;">
        <div class="col-xs-12"><hr></div>
        <div class="col-xs-12">
            <h2>SVG音符＋背景：</h2>
        </div>

        <div class="col-xs-10" style="border: 1px solid white;border-radius: 10px;">
            <svg id="musicWithBackground" width="100%" height="200"></svg>
        </div>

        <div class="col-xs-2">
            <button type="button" class="btn btn-default" onclick="musicWithBackground()" style="width: 100%;">
                <span style="color: black">DRAW</span>
            </button>
            <h5>每次按隨機產生顏色</h5>
            <button type="button" class="btn btn-danger" onclick="musicWithBackgroundReset()" style="width: 100%;margin-top: 20px;">
                <span style="color: black">CLEAR</span>
            </button>
        </div>
    </div>
</div>


<div class="container">
    <div class="row" style="padding-top: 40px;">
        <div class="col-xs-12"><hr></div>
        <div class="col-xs-12">
            <h2>長條圖練習：</h2>
        </div>
        <div class="col-xs-10" style="border: 1px solid white;border-radius: 10px;">
            <svg class="drawLine" width="100%" height="280">

            </svg>
        </div>

        <div class="col-xs-2">
            <button type="button" class="btn btn-default" onclick="d3svg2()" style="width: 100%;">
                <span style="color: black">DRAW</span>
            </button>
                <h5>每次按隨機產生顏色</h5>
            <button type="button" class="btn btn-danger" onclick="drawLineoneReset()" style="width: 100%;margin-top: 20px;">
                <span style="color: black">CLEAR</span>
            </button>
        </div>
    </div>
</div>


<div class="container">
    <div class="row" style="padding-top: 40px;">
        <div class="col-xs-12"><hr></div>
        <div class="col-xs-12">
            <h2>長條圖作業：</h2>
        </div>
        <div class="col-xs-10" style="border: 1px solid white;border-radius: 10px;padding: 10px;">
            <svg id="drawRandLine" width="100%" height="250">
            </svg>
        </div>
        <div class="col-xs-2">
            <button type="button" class="btn btn-default" onclick="drawRandLine()" style="width: 100%">
                <span style="color: black">DRAW</span>
            </button>
            <h5>每次按隨機產生顏色</h5>
            <button type="button" class="btn btn-danger" onclick="randlineReset()" style="width: 100%;margin-top: 20px;">
                <span style="color: black">CLEAR</span>
            </button>
        </div>
        <div class="col-xs-12" style="height: 200px"></div>

    </div>
</div>


</body>
<script>

    function lunch() {

        var num = random(1911, 2017);

        d3.select('p').text(num);

    }



    function randlineReset() {

        d3.select('#drawRandLine').html("");

    }


    function drawLineoneReset() {

        d3.select('.drawLine').html("");

    }


    function musicWithBackgroundReset() {

        d3.select('#musicWithBackground').html("");


    }

    function musicReset() {

        d3.select('#music').html("");


    }

    function drawRandLine() {

        var height = 10;
        var padding = 2;

        d3.select('#drawRandLine').html("");

        for(var i=0; i< 20 ; i++){
            var ran = random(20,300);
            d3.select('#drawRandLine')
                    .append('rect')
                    .attr({
                        x:0,
                        y:(height+padding)*i,
                        width: 0,
                        height:height,
                        fill:'rgb('+random(0,255)+ ','+random(0,255)+','+random(0,255)+')'
                    })
                    .transition()
                    .duration(random(1,1000))
                    .delay(random(1,300))
                    .attr({
                        width: ran
                    });

            d3.select('#drawRandLine')
                    .append('text')
                    .transition()
                    .delay(300)
                    .attr({
                        x:ran+15,
                        y:10+(height+padding)*i,
                        'font-size':'12px',
                        'font-family':'arial',
                        fill:'white'
                    }).text(ran);
        }
    }


    function d3svg2() {

        var height = 15;
        var firstWidth = 10;

        d3.select('.drawLine').html("");

        for(var i=0; i<10 ; i++){
            d3.select('.drawLine')
                    .append('rect')
                    .attr({
                        x:0,
                        y:i*(firstWidth+height),
                        width:firstWidth*i*12,
                        height:height,
                        fill:'rgb('+random(0,255)+ ','+random(0,255)+','+random(0,255)+')'
                    });
        }
    }


    function musicWithBackground() {

        d3.select('#musicWithBackground').html("");

        d3.select('#musicWithBackground')
                .append('rect')
                .attr({
                    x:0,
                    y:0,
                    width:'100%',
                    height:500,
                    fill:'rgb('+random(0,255)+ ','+random(0,255)+','+random(0,255)+')'
                });

        for(var i = 1 ; i <= 5 ; i++){
            d3.select('#musicWithBackground')
                    .append('rect')
                    .attr({
                        x:20,
                        y: d3.select('#musicWithBackground').style("height").replace("px", "") / 6 * i,
                        width:d3.select('#musicWithBackground').style("width").replace("px", "") - 20,
                        height:2,
                        fill:'black'
                    });
        }

        d3.select('#musicWithBackground')
                .append('circle')
                .attr({
                    cx:500,
                    cy:d3.select('#musicWithBackground').style("height").replace("px", "") / 6 * 4 - 15,
                    r:15,
                    fill:'black'
                });
        d3.select('#musicWithBackground')
                .append('rect')
                .attr({
                    x:500+9,
                    y:d3.select('#musicWithBackground').style("height").replace("px", "") / 6 * 4 - 90 ,
                    width:5,
                    height:80,
                    fill:'black'
                });
    }

    function d3svg() {

        d3.select('.d3svg').html("");

        var colorr = 'rgb('+random(0,255)+ ','+random(0,255)+','+random(0,255)+')';


        d3.select('.d3svg')
                .append('circle')
                .attr({
                    cx:150,
                    cy:120,
                    r:15,
                    fill:colorr
                });
        d3.select('.d3svg')
                .append('rect')
                .attr({
                    x:160,
                    y:45,
                    width:5,
                    height:78,
                    fill:colorr
                });
    }


    function random(n, m) {

        return Math.ceil(Math.random() * (m - n) + n);
    }


</script>


<style>
    body {
        background-color: rgba(18, 15, 14, 0.91);
    }
    hr{

        border-color: #999999;

    }

    h1, h2, h3, h4, h5, h6, span, p {
        font-family: Helvetica, Noto Sans CJK TC;
        font-weight: 300;
        color: white;
    }
</style>

</html>